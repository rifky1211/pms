<%- include('../../../partials/header-details.ejs') %> <%-
include('../../../components/navbar') %>

<div class="container-fluid">
  <div class="row">
    <%- include('../../../components/sidebar') %>
    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
      <div
        class="
          d-flex
          justify-content-between
          flex-wrap flex-md-nowrap
          align-items-center
          pt-3
          pb-2
          mb-3
          border-bottom
        "
      >
        <h1 class="h2">Edit Issues</h1>
      </div>
      <div class="card pr-4">
        <div class="card-body pr-4">
          <form action="" class="form-horizontal" method="POST" enctype="multipart/form-data">
            <div class="row mb-4">
              <div class="col-sm-2">Tracker</div>
              <div class="col-sm-10">
                <div class="custom-control custom-radio">
                  <input
                    type="radio"
                    name="tracker"
                    id="tracker"
                    value="Bug"
                    class="custom-control-input"
                    <%= data.tracker == 'Bug' ? ' checked' : '' %> 
                  />
                  <label for="tracker" class="custom-control-label">Bug</label>
                </div>
                <div class="custom-control custom-radio">
                  <input
                    type="radio"
                    name="tracker"
                    id="feature"
                    value="Feature"
                    class="custom-control-input"
                    <%= data.tracker == 'Feature' ? ' checked' : '' %> 
                  />
                  <label for="feature" class="custom-control-label"
                    >Feature</label
                  >
                </div>
                <div class="custom-control custom-radio">
                  <input
                    type="radio"
                    name="tracker"
                    id="support"
                    value="Support"
                    class="custom-control-input"
                    <%= data.tracker == 'Support' ? ' checked' : '' %> 
                  />
                  <label for="support" class="custom-control-label"
                    >Support</label
                  >
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="subject" class="control-label col-sm-2">Subject</label>
                <input type="text" value="<%= data.subject %>" id="subject" name="subject" class="form-control col-sm-10" placeholder="Subject">
              </div>
            </div>
            <div class="form-group mb-4">
              <div class="row">
                <label for="description" class="control-label col-sm-2">Description</label>
                <textarea name="description" id="description" class="form-control col-sm-10" placeholder="Description .. " cols="10" rows="3"><%= data.description %></textarea>
              </div>
            </div>
            <div class="form-group mb-4">
              <div class="row">
                <div class="col-sm-2">Status</div>
                <div class="col-sm-10">
                  <div class="custom-control custom-radio">
                    <input
                      type="radio"
                      name="status"
                      id="new"
                      value="New"
                      class="custom-control-input"
                      <%= data.status == 'New' ? ' checked' : '' %>
                    />
                    <label for="new" class="custom-control-label">New</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input
                      type="radio"
                      name="status"
                      id="inprogress"
                      value="In Progress"
                      class="custom-control-input"
                      <%= data.status == 'In Progress' ? ' checked' : '' %> 
                    />
                    <label for="inprogress" class="custom-control-label">In Progress</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input
                      type="radio"
                      name="status"
                      id="resolved"
                      value="Resolved"
                      class="custom-control-input"
                      <%= data.status == 'Resolved' ? ' checked' : '' %> 
                      
                    />
                    <label for="resolved" class="custom-control-label">Resolved</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input
                      type="radio"
                      name="status"
                      id="feedback"
                      value="Feedback"
                      class="custom-control-input"
                      <%= data.status == 'Feedback' ? ' checked' : '' %> 
                      
                    />
                    <label for="feedback" class="custom-control-label">Feedback</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input
                      type="radio"
                      name="status"
                      id="closed"
                      value="Closed"
                      class="custom-control-input"
                      <%= data.status == 'Closed' ? ' checked' : '' %> 
                      
                    />
                    <label for="closed" class="custom-control-label">Closed</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input
                      type="radio"
                      name="status"
                      id="rejected"
                      value="Rejected"
                      class="custom-control-input"
                      <%= data.status == 'Rejected' ? ' checked' : '' %> 
                    />
                    <label for="rejected" class="custom-control-label">Rejected</label>
                  </div>

                </div>
              </div>
            </div>
            <div class="form-group mb-4">
              <div class="row">
                <div class="col-sm-2">Priority</div>
                <div class="col-sm-10">
                  <div class="custom-control custom-radio">
                    <input type="radio" id="normal" name="priority" value="Normal" class="custom-control-input" <%= data.priority == 'Normal' ? ' checked' : '' %> >
                    <label for="normal" class="custom-control-label">Normal</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input type="radio" id="high" name="priority" value="High" class="custom-control-input" <%= data.priority == 'High' ? ' checked' : '' %>>
                    <label for="high" class="custom-control-label">High</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input type="radio" id="urgent" name="priority" value="Urgent" class="custom-control-input" <%= data.priority == 'Urgent' ? ' checked' : '' %>>
                    <label for="urgent" class="custom-control-label">Urgent</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input type="radio" id="immediate" name="priority" value="Immediate" class="custom-control-input" <%= data.priority == 'Immediate' ? ' checked' : '' %>>
                    <label for="immediate" class="custom-control-label">Immediate</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="assignee" class="control-label col-sm-2">Assignee</label>
                <select name="assignee" id="assignee" class="custom-select col-sm-10">
                  <% names.forEach(item => { %> 
                  <option value="<%= item.userid %>" <%= item.userid == data.assignee ? ' selected' : '' %>><%= item.firstname %> <%= item.lastname %> </option>
                  <% }) %> 
                </select>
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="startdate" class="control-label col-sm-2">Start Date</label>
                <input type="date" id="startdate" name="startdate" class="form-control col-sm-10" placeholder="Startdate" value="<%= moment(data.startdate).format('YYYY-MM-DD') %>">
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="duedate" class="control-label col-sm-2">Due Date</label>
                <input type="date" id="duedate" name="duedate" class="form-control col-sm-10" placeholder="Startdate" value="<%= moment(data.duedate).format('YYYY-MM-DD') %>">
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="estimatedtime" class="control-label col-sm-2">Estimated Time</label>
                <input type="number" step="any" id="estimatedtime" name="estimatedtime" class="form-control col-sm-10" placeholder="Startdate" value="<%= data.estimatedtime %>">
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="done" class="control-label col-sm-2">% done</label>
                <select name="done" id="done" class="custom-select col-sm-10">
                  <option value="0"<%= data.done == 0  ? ' selected' : '' %>>0</option>
                  <option value="10"<%= data.done == 10  ? ' selected' : '' %>>10</option>
                  <option value="20"<%= data.done == 20  ? ' selected' : '' %>>20</option>
                  <option value="30"<%= data.done == 30  ? ' selected' : '' %>>30</option>
                  <option value="40"<%= data.done == 40  ? ' selected' : '' %>>40</option>
                  <option value="50"<%= data.done == 50  ? ' selected' : '' %>>50</option>
                  <option value="60"<%= data.done == 60  ? ' selected' : '' %>>60</option>
                  <option value="70"<%= data.done == 70  ? ' selected' : '' %>>70</option>
                  <option value="80"<%= data.done == 80  ? ' selected' : '' %>>80</option>
                  <option value="90"<%= data.done == 90  ? ' selected' : '' %>>90</option>
                  <option value="100"<%= data.done == 100  ? ' selected' : '' %>>100</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <div class="row mb-4">
                <label for="files" class="control-label col-sm-2">Files</label>
                <input type="file" id="files" name="files" class="form-control col-sm-3" placeholder="Subject">
               
              </div>
            </div>
            <div class="row">
              <table class="table-striped col-sm-6">
                <tr>
                  <th>File</th>
                </tr>
                <tr>
                  <td>
                    <% if(data.files.length > 0){ %> 
                    <ul>
                      <% data.files.forEach(file => { %> 
                      <li><img src="<%= `${baseUrl}/uploaded/${file.name}` %>" alt="a" width="100"></li>
                    </ul>
                    <% })} %> 
                  </td>
                </tr>
              </table>
            </div>
            <button type="submit" class="btn btn-primary mt-4">Save</button>
          </form>
        </div>
      </div>
    </main>
  </div>
</div>

<%- include('../../../partials/footer-details.ejs') %>
